import{d as g,r as p,u as v,s as f,f as y,o as h,g as k,h as a,w as c,v as u,t as S,j as w,k as x,x as I,m as b,y as B,z as C,A as L,p as N,n as T,_ as V,q as A}from"./index.9ce13a47.js";const U=s=>(N("data-v-1e579a38"),s=s(),T(),s),D={class:"page register"},P={id:"loginForm"},j=U(()=>a("img",{id:"logo",src:V,alt:"logo"},null,-1)),z={id:"error"},M=g({__name:"Login",setup(s){const n=p(""),r=p(""),l=p(""),d=v(),{party:m}=f(d),_=async()=>{try{console.log("Attempting login");const t=await b.post("http://ec2-3-126-130-133.eu-central-1.compute.amazonaws.com/auth/login",{username:n.value,password:r.value}),o=B();o.toogleLogin(),o.$state.user.token=t.data.token;let e=t.data.token?C(t.data.token):null;console.log("user alooooooo",e),localStorage.setItem("token",t.data.token),L.push("/profile"),localStorage.setItem("userStore",JSON.stringify(o.$state)),d.addMemberToParty({steamId:e==null?void 0:e.steamId,username:e==null?void 0:e.username,status:"Ambassador",balance:1e3,avatar:"/img/user/avatar.png",profileBanner:"/img/user/profileBanner.jpg",token:"",steamInfo:null},0),console.log("party: ",m.value.members)}catch(t){l.value=t.response.data.message,setTimeout(()=>{l.value=""},1500)}};return(t,o)=>{const e=y("router-link");return h(),k("div",D,[a("div",P,[j,c(a("input",{type:"text",placeholder:"Username",id:"email","onUpdate:modelValue":o[0]||(o[0]=i=>n.value=i)},null,512),[[u,n.value]]),c(a("input",{type:"password",name:"",id:"password",placeholder:"Password","onUpdate:modelValue":o[1]||(o[1]=i=>r.value=i)},null,512),[[u,r.value]]),a("p",{onClick:_,id:"submit"},"LOGIN"),a("p",z,S(l.value),1),w(e,{to:"/register",id:"createAcc"},{default:x(()=>[I("Dont't have an account? Create one!")]),_:1})])])}}});const $=A(M,[["__scopeId","data-v-1e579a38"]]);export{$ as default};
