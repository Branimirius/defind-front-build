import{d as g,r as c,u as v,s as f,f as y,o as h,g as k,h as o,w as d,v as u,t as S,j as w,k as x,x as I,m as b,y as B,z as C,A as L,p as N,n as T,_ as V,q as A}from"./index.96f1c351.js";const U=s=>(N("data-v-82c54f4a"),s=s(),T(),s),D={class:"page register"},P={id:"loginForm"},j=U(()=>o("img",{id:"logo",src:V,alt:"logo"},null,-1)),z={id:"error"},M=g({__name:"Login",setup(s){const n=c(""),r=c(""),l=c(""),p=v(),{party:m}=f(p),_=async()=>{try{console.log("Attempting login");const a=await b.post("http://ec2-3-126-130-133.eu-central-1.compute.amazonaws.com/auth/login",{username:n.value,password:r.value}),e=B();e.toogleLogin(),e.$state.user.token=a.data.token;let t=a.data.token?C(a.data.token):null;localStorage.setItem("token",a.data.token),localStorage.setItem("userStore",JSON.stringify(e.$state)),p.addMemberToParty({steamId:t==null?void 0:t.steamId,username:t==null?void 0:t.username,status:"Ambassador",balance:1e3,avatar:"/img/user/avatar.png",profileBanner:"/img/user/profileBanner.jpg",token:"",steamInfo:null},0),console.log("party: ",m.value.members),L.push("/profile")}catch(a){l.value=a.response.data.message,setTimeout(()=>{l.value=""},1500)}};return(a,e)=>{const t=y("router-link");return h(),k("div",D,[o("div",P,[j,d(o("input",{type:"text",placeholder:"Username",id:"email","onUpdate:modelValue":e[0]||(e[0]=i=>n.value=i)},null,512),[[u,n.value]]),d(o("input",{type:"password",name:"",id:"password",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=i=>r.value=i)},null,512),[[u,r.value]]),o("p",{onClick:_,id:"submit"},"LOGIN"),o("p",z,S(l.value),1),w(t,{to:"/register",id:"createAcc"},{default:x(()=>[I("Dont't have an account? Create one!")]),_:1})])])}}});const $=A(M,[["__scopeId","data-v-82c54f4a"]]);export{$ as default};
