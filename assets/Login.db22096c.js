import{d as g,r as i,u as v,s as f,o as h,f as y,g as a,w as d,v as p,t as w,j as S,m as k,n as I,p as b,k as x,_ as B,l as L}from"./index.933b938d.js";const u=s=>(b("data-v-9760b7ec"),s=s(),x(),s),T={class:"page register"},U={id:"loginForm"},A=u(()=>a("img",{id:"logo",src:B,alt:"logo"},null,-1)),C={id:"error"},D=u(()=>a("a",{href:"/Register",id:"createAcc"},"Dont't have an account? Create one!",-1)),N=g({__name:"Login",setup(s){const n=i(""),r=i(""),l=i(""),c=v(),{party:m}=f(c),_=async()=>{try{console.log("Attempting login");const t=await S.post("http://ec2-3-126-130-133.eu-central-1.compute.amazonaws.com/auth/login",{username:n.value,password:r.value}),o=k();o.toogleLogin(),o.$state.user.token=t.data.token;let e=t.data.token?I(t.data.token):null;console.log("user alooooooo",e),localStorage.setItem("token",t.data.token),window.location.href="/profile",localStorage.setItem("userStore",JSON.stringify(o.$state)),c.addMemberToParty({steamId:e==null?void 0:e.steamId,username:e==null?void 0:e.username,status:"Ambassador",balance:1e3,avatar:"/img/user/avatar.png",profileBanner:"/img/user/profileBanner.jpg",token:"",steamInfo:null},0),console.log("party: ",m.value.members)}catch(t){l.value=t.response.data.message,setTimeout(()=>{l.value=""},1500)}};return(t,o)=>(h(),y("div",T,[a("div",U,[A,d(a("input",{type:"text",placeholder:"Username",id:"email","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},null,512),[[p,n.value]]),d(a("input",{type:"password",name:"",id:"password",placeholder:"Password","onUpdate:modelValue":o[1]||(o[1]=e=>r.value=e)},null,512),[[p,r.value]]),a("p",{onClick:_,id:"submit"},"LOGIN"),a("p",C,w(l.value),1),D])]))}});const V=L(N,[["__scopeId","data-v-9760b7ec"]]);export{V as default};
